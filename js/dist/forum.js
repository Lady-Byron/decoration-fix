(()=>{var t={n:e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};(()=>{"use strict";function e(){return e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},e.apply(null,arguments)}const r=flarum.core.compat["forum/app"];var n="[decoration-fix v1]";function a(){try{var t,e,r=(null==(t=window.flarum)||null==(t=t.core)?void 0:t.compat)||(null==(e=window.flarum)?void 0:e.compat)||{},i=r["models/User"]||r["common/models/User"],o=i&&(i.default||i);if(!o||o.prototype.__lb_df_dn_patched)return;var l=o.prototype.displayName;o.prototype.displayName=function(){var t;try{var e,r,n;t=l?l.call(this):null!=(e=null==(r=this.username)?void 0:r.call(this))?e:null==(n=this.attribute)?void 0:n.call(this,"username")}catch(t){}if("string"==typeof t)return t;if(t&&"object"==typeof t){var a,i,o,c=(null==(a=this.attribute)?void 0:a.call(this,"displayName"))||(null==(i=this.username)?void 0:i.call(this))||(null==(o=this.attribute)?void 0:o.call(this,"username"))||"";try{Object.defineProperty(t,"toJSON",{value:function(){return c},configurable:!0})}catch(e){t.toJSON=function(){return c}}if(!t.toString||t.toString===Object.prototype.toString)try{Object.defineProperty(t,"toString",{value:function(){return c},configurable:!0})}catch(e){t.toString=function(){return c}}}return t},o.prototype.__lb_df_dn_patched=!0,console.log(n,"displayName adapter installed")}catch(t){console.warn(n,"displayName adapter error, retryingâ€¦",t),setTimeout(a,120)}}t.n(r)().initializers.add("lady-byron-decoration-fix",function(){a(),function(){if(!JSON.stringify.__lb_df_guard){var t=JSON.stringify;JSON.stringify=function(r,n,a){try{if(function(t){return t&&"object"==typeof t&&"event"in t&&"data"in t&&String(t.event||"").toLowerCase().includes("typing")}(r)&&void 0===n){var i=e({},r.data||{});if("string"!=typeof i.displayName)try{i.displayName=i.displayName&&i.displayName.toJSON&&i.displayName.toJSON()||String(i.displayName||"")}catch(t){i.displayName=""}return t.call(this,{event:r.event,data:i},void 0,a)}}catch(t){}return t.call(this,r,n,a)},JSON.stringify.__lb_df_guard=!0,console.log(n,"typing guard installed")}}()})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map